(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[582],{573:function(e,r,t){"use strict";t.r(r);var n=t(5861),a=t(2982),s=t(885),l=t(7757),o=t.n(l),c=t(2791),i=t(2704),d=t(7276),u=t.n(d),m=t(4390),h=(t(708),t(7447)),p=t(8997),x=t(7022),j=t(9743),f=t(2677),v=t(7858),b=t(9795),y=t(3360),g=t(4849),Z=t(9140),O=t(2469),w=t(2591),N=t(5736),P=t(184),S=function(e,r){return u()(e,{precision:r})},C=function(e,r){return e.format({symbol:r}).replace(",","+").replace(".",",").replace("+",".")};r.default=function(){var e=(0,c.useState)("proposta"),r=(0,s.Z)(e,2),t=r[0],l=r[1],d=(0,c.useState)(""),u=(0,s.Z)(d,2),k=u[0],D=u[1],z=(0,c.useState)([]),E=(0,s.Z)(z,2),I=E[0],L=E[1],M=(0,c.useState)([]),T=(0,s.Z)(M,2),G=T[0],F=T[1],U=(0,c.useState)(0),V=(0,s.Z)(U,2),R=V[0],_=V[1],B=(0,c.useState)(!1),H=(0,s.Z)(B,2),$=H[0],q=H[1],A=(0,c.useState)(!1),Q=(0,s.Z)(A,2),K=Q[0],W=Q[1],J=(0,c.useState)([]),X=(0,s.Z)(J,2),Y=X[0],ee=X[1],re=(0,c.useState)([]),te=(0,s.Z)(re,2),ne=te[0],ae=te[1],se=(0,c.useState)(0),le=(0,s.Z)(se,2),oe=(le[0],le[1],(0,c.useRef)(null)),ce=function(){var e=(0,n.Z)(o().mark((function e(r){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),q(!0),W(!1),ee([]),ae([]),null!=oe.current&&oe.current.reset(),n="proposta"===t?"margemproposta":"margempedido",e.next=9,m.Z.post("/".concat(n,"/").concat(k)).then((function(e){L(e.data),F(e.data.itens),_(e.data.itens.length),W(!0)})).catch((function(e){console.log("Erro ao carregar proposta/pedido:",e.message)}));case 9:q(!1);case 10:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(i.Z,{logged:!0}),(0,P.jsx)(x.Z,{fluid:!0,children:(0,P.jsxs)(j.Z,{className:"flex-xl-nowrap",children:[(0,P.jsx)(f.Z,{xs:12,md:3,lg:2,className:"p-0",children:(0,P.jsxs)(h.Drawer,{children:[(0,P.jsx)(h.Drawer.Toggle,{}),(0,P.jsx)(v.Z,{children:(0,P.jsx)(h.Drawer.Overflow,{children:(0,P.jsxs)(h.Drawer.ToC,{children:[(0,P.jsx)(h.Drawer.Header,{className:"text-center",children:"C\xe1lculo de Margem"}),(0,P.jsxs)(h.Drawer.Nav,{children:[(0,P.jsx)(h.Drawer.Item,{children:(0,P.jsx)("hr",{className:"m-0 my-2"})}),(0,P.jsxs)(h.Drawer.Item,{children:[(0,P.jsx)("p",{className:"text-muted text-center",children:"Dados:"}),(0,P.jsxs)(b.Z,{onSubmit:ce,children:[(0,P.jsxs)(b.Z.Control,{as:"select",custom:!0,onChange:function(e){return l(e.target.value)},className:"mb-3",children:[(0,P.jsx)("option",{value:"proposta",children:"Proposta"}),(0,P.jsx)("option",{value:"pedido",disabled:!0,children:"Pedido"})]}),(0,P.jsx)(b.Z.Control,{placeholder:"N\xfamero",onChange:function(e){D(e.target.value)},className:"mb-3"}),(0,P.jsx)(p.Z,{children:(0,P.jsxs)(y.Z,{variant:"primary",type:"submit",block:!0,children:[$&&(0,P.jsx)(g.Z,{animation:"border",size:"sm",role:"status","aria-hidden":"true"}),!$&&(0,P.jsx)(P.Fragment,{children:"Carregar"})]})})]})]}),(0,P.jsx)(h.Drawer.Item,{children:(0,P.jsx)("hr",{className:"m-0 my-2"})}),K&&!$&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(h.Drawer.Item,{children:[(0,P.jsx)("p",{className:"text-muted text-center",children:"Altera\xe7\xf5es:"}),(0,P.jsx)(p.Z,{children:(0,P.jsx)(y.Z,{variant:"outline-success",block:!0,disabled:!0,children:"Salvar no Binx"})})]}),(0,P.jsx)(h.Drawer.Item,{children:(0,P.jsx)(p.Z,{children:(0,P.jsx)(y.Z,{variant:"outline-primary",block:!0,disabled:!0,children:"Exportar"})})})]})]})]})})})]})}),(0,P.jsxs)(f.Z,{xs:12,md:9,lg:10,children:[(0,P.jsxs)(x.Z,{fluid:!0,className:"mt-4",children:[(0,P.jsx)(Z.Z.Title,{className:"mt-2",children:"C\xe1lculo de Margem"}),(0,P.jsx)(Z.Z.Subtitle,{className:"my-2 text-muted",children:"Calcular margem sobre proposta comercial ou pedido de venda"}),!K&&!$&&(0,P.jsx)(O.Z,{variant:"warning",className:"mt-3",children:"Selecione o tipo de c\xe1lculo a ser realizado e carregue o pedido ou proposta para visualizar os resultados"})]}),!K&&$&&(0,P.jsx)(x.Z,{fluid:!0,className:"text-center mt-4",children:(0,P.jsx)(g.Z,{animation:"border",size:"md",role:"status","aria-hidden":"true"})}),(0,P.jsx)(Z.Z.Body,{children:K&&!$&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("hr",{className:"m-0 mb-4"}),(0,P.jsxs)(x.Z,{fluid:!0,className:"p-0",children:[(0,P.jsxs)("h5",{children:["Dados"," ","proposta"===t?"da Proposta":"do Pedido de Venda"]}),(0,P.jsxs)("p",{className:"text-muted",children:["Dados referentes"," ","proposta"===t?"a proposta comercial":"ao pedido de compra"]})]}),(0,P.jsxs)(j.Z,{children:[(0,P.jsx)(f.Z,{sm:2,children:(0,P.jsxs)(b.Z.Group,{children:[(0,P.jsx)(b.Z.Label,{className:"text-muted",children:"Proposta:"}),(0,P.jsx)(b.Z.Control,{size:"sm",value:I.numeroProposta,readOnly:!0})]})}),(0,P.jsx)(f.Z,{sm:6,children:(0,P.jsxs)(b.Z.Group,{children:[(0,P.jsx)(b.Z.Label,{className:"text-muted",children:"Cliente:"}),(0,P.jsx)(b.Z.Control,{size:"sm",value:I.cliente,readOnly:!0})]})}),(0,P.jsx)(f.Z,{sm:2,children:(0,P.jsxs)(b.Z.Group,{children:[(0,P.jsx)(b.Z.Label,{className:"text-muted",children:"Vendedor:"}),(0,P.jsx)(b.Z.Control,{size:"sm",value:I.vendedor,readOnly:!0})]})}),(0,P.jsx)(f.Z,{sm:2,children:(0,P.jsxs)(b.Z.Group,{children:[(0,P.jsx)(b.Z.Label,{className:"text-muted",children:"Situa\xe7\xe3o:"}),(0,P.jsx)(b.Z.Control,{size:"sm",value:I.situacao,readOnly:!0})]})})]}),(0,P.jsxs)(j.Z,{children:[(0,P.jsx)(f.Z,{sm:2,children:(0,P.jsxs)(b.Z.Group,{children:[(0,P.jsx)(b.Z.Label,{className:"text-muted",children:"Quantidade de Itens:"}),(0,P.jsx)(b.Z.Control,{size:"sm",value:R,readOnly:!0})]})}),(0,P.jsx)(f.Z,{sm:2,children:(0,P.jsxs)(b.Z.Group,{children:[(0,P.jsx)(b.Z.Label,{className:"text-muted",children:"Valor dos itens:"}),(0,P.jsx)(b.Z.Control,{size:"sm",value:C(S(I.subTotal,2),"R$"),readOnly:!0})]})}),(0,P.jsx)(f.Z,{sm:2,children:(0,P.jsxs)(b.Z.Group,{children:[(0,P.jsx)(b.Z.Label,{className:"text-muted",children:"Valor do Frete:"}),(0,P.jsx)(b.Z.Control,{size:"sm",value:C(S(I.frete,2),"R$"),readOnly:!0})]})}),(0,P.jsx)(f.Z,{sm:2,children:(0,P.jsxs)(b.Z.Group,{children:[(0,P.jsx)(b.Z.Label,{className:"text-muted",children:"Total da Proposta:"}),(0,P.jsx)(b.Z.Control,{size:"sm",value:C(S(I.total,2),"R$"),readOnly:!0})]})}),(0,P.jsx)(f.Z,{sm:2,children:(0,P.jsxs)(b.Z.Group,{children:[(0,P.jsx)(b.Z.Label,{className:"text-muted",children:"Margem Salva:"}),(0,P.jsx)(b.Z.Control,{size:"sm",value:"",readOnly:!0})]})}),(0,P.jsx)(f.Z,{sm:2,children:(0,P.jsxs)(b.Z.Group,{children:[(0,P.jsx)(b.Z.Label,{className:"text-muted",children:"Margem Atual:"}),(0,P.jsx)(b.Z.Control,{size:"sm",value:"",readOnly:!0})]})})]}),(0,P.jsx)("hr",{}),(0,P.jsxs)(x.Z,{className:"mb-4 p-0",children:[(0,P.jsxs)("h5",{children:["Itens"," ","proposta"===t?"da Proposta":"do Pedido de Venda"]}),(0,P.jsxs)("p",{className:"text-muted",children:["Itens presentes"," ","proposta"===t?"na Proposta Comercial":"no Pedido de Compra"]})]}),(0,P.jsx)(b.Z,{ref:oe,children:(0,P.jsxs)(w.Z,{hover:!0,size:"sm",children:[(0,P.jsx)("thead",{children:(0,P.jsxs)("tr",{children:[(0,P.jsx)("th",{}),(0,P.jsx)("th",{children:"SKU"}),(0,P.jsx)("th",{children:"Item"}),(0,P.jsx)("th",{children:"Qntd"}),(0,P.jsx)("th",{children:"Pre\xe7o Lista"}),(0,P.jsx)("th",{children:"Desc %"}),(0,P.jsx)("th",{children:"Pre\xe7o Un"}),(0,P.jsx)("th",{children:"Pre\xe7o Total"}),(0,P.jsx)("th",{children:"Custo Un."}),(0,P.jsx)("th",{children:"Custo Total"}),(0,P.jsx)("th",{children:"Margem"})]})}),(0,P.jsx)("tbody",{children:G.map((function(e,r){return(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{children:(0,P.jsx)(N.Z,{bg:"secondary",children:r+1})}),(0,P.jsx)("td",{children:e.sku}),(0,P.jsx)("td",{children:e.nome}),(0,P.jsx)("td",{children:e.quantidade}),(0,P.jsx)("td",{children:C(S(e.precoLista,3),"")}),(0,P.jsx)("td",{children:e.descontoItem.replace(".",",")}),(0,P.jsx)("td",{children:C(S(e.valorUnidade,3),"")}),(0,P.jsx)("td",{children:C(S(e.valorUnidade,2).multiply(e.quantidade),"")}),(0,P.jsx)("td",{children:(0,P.jsx)(b.Z.Control,{size:"sm",type:"text",htmlSize:"6",onChange:function(e){return function(e,r){r=r.replace(",",".");var t=(0,a.Z)(Y),n=(0,a.Z)(ne);t[e]=r;var s=G[e].valorUnidade,l=t[e],o=parseFloat((s-l)/s*100).toFixed(2);n[e]=o,ee(t),ae(n)}(r,e.target.value)}})}),(0,P.jsx)("td",{}),(0,P.jsx)("td",{children:(0,P.jsx)(b.Z.Control,{size:"sm",type:"text",htmlSize:"6",readOnly:!0,value:void 0==ne[r]?"":ne[r]+"%"})})]},r)}))})]})})]})})]})]})})]})}},7447:function(e,r,t){self,e.exports=function(){"use strict";var e={n:function(r){var t=r&&r.__esModule?function(){return r.default}:function(){return r};return e.d(t,{a:t}),t},d:function(r,t){for(var n in t)e.o(t,n)&&!e.o(r,n)&&Object.defineProperty(r,n,{enumerable:!0,get:t[n]})},o:function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},r={};e.r(r),e.d(r,{Drawer:function(){return j},DrawerNavigation:function(){return c},DrawerNavigationHeader:function(){return l},DrawerOverflow:function(){return d},DrawerToC:function(){return m},DrawerToggle:function(){return p}});var n=t(2791),a=e.n(n);function s(){return(s=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}var l=function(e){var r=e.className,t=function(e,r){if(null==e)return{};var t,n,a=function(e,r){if(null==e)return{};var t,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)t=s[n],r.indexOf(t)>=0||(a[t]=e[t]);return a}(e,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)t=s[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}(e,["className"]),n="react-bootstrap-drawer-toc-header nav-link ".concat(r||"").trim();return a().createElement("a",s({},t,{className:n}),e.children)};function o(){return(o=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}var c=function(e){var r=e.className,t=function(e,r){if(null==e)return{};var t,n,a=function(e,r){if(null==e)return{};var t,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)t=s[n],r.indexOf(t)>=0||(a[t]=e[t]);return a}(e,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)t=s[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}(e,["className"]),n="d-block nav ".concat(r||"").trim();return a().createElement("div",o({},t,{className:n}),e.children)};function i(){return(i=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}var d=function(e){var r=e.className,t=function(e,r){if(null==e)return{};var t,n,a=function(e,r){if(null==e)return{};var t,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)t=s[n],r.indexOf(t)>=0||(a[t]=e[t]);return a}(e,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)t=s[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}(e,["className"]),n="react-bootstrap-drawer-overflow ".concat(r||"").trim();return a().createElement("div",i({},t,{className:n}),e.children)};function u(){return(u=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}var m=function(e){var r=e.className,t=function(e,r){if(null==e)return{};var t,n,a=function(e,r){if(null==e)return{};var t,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)t=s[n],r.indexOf(t)>=0||(a[t]=e[t]);return a}(e,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)t=s[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}(e,["className"]),n="react-bootstrap-drawer-toc pt-2 pb-4 ".concat(r||"").trim();return a().createElement("div",u({},t,{className:n}),e.children)};function h(){return(h=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}var p=function(e){var r=e.className,t=e.type,n=function(e,r){if(null==e)return{};var t,n,a=function(e,r){if(null==e)return{};var t,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)t=s[n],r.indexOf(t)>=0||(a[t]=e[t]);return a}(e,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)t=s[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}(e,["className","type"]),s=t||"button",l="react-bootstrap-drawer-toggle p-0 d-md-none ml-3 btn btn-link btn-lg ".concat(r||"").trim();return a().createElement("button",h({},n,{type:s,className:l}),a().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30",width:"30",height:"30",focusable:"false"},a().createElement("title",null,"Menu"),a().createElement("path",{stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeMiterlimit:"10",d:"M4 7h22M4 15h22M4 23h22"})))};function x(){return(x=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}var j=function(e){var r=e.className,t=function(e,r){if(null==e)return{};var t,n,a=function(e,r){if(null==e)return{};var t,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)t=s[n],r.indexOf(t)>=0||(a[t]=e[t]);return a}(e,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)t=s[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}(e,["className"]),n="react-bootstrap-drawer d-flex flex-column ".concat(r||"").trim();return a().createElement("div",x({},t,{className:n}),e.children)};return j.Header=l,j.Item=function(e){var r=e.href;return a().createElement("div",{className:"nav-item"},a().createElement("a",{className:"nav-link",href:r},e.children))},j.Nav=c,j.Overflow=d,j.ToC=m,j.Toggle=p,r}()},708:function(){}}]);
//# sourceMappingURL=582.7ebb7a5c.chunk.js.map